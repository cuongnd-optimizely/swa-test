{"version":3,"file":"pl-states.js","sources":["../../../../xpack/scripts/pl-states.entry.ts"],"sourcesContent":["interface Theme {\r\n  value: string;\r\n  name: string;\r\n}\r\n\r\ninterface StateOption {\r\n  name: string;\r\n  value: string;\r\n}\r\n\r\ninterface State {\r\n  name: string;\r\n  options?: StateOption[];\r\n  multiple?: boolean;\r\n}\r\n\r\ninterface StateButton {\r\n  parentSelector?: string;\r\n  styleModifier: string;\r\n  zIndex?: number;\r\n}\r\n\r\ninterface ComponentState {\r\n  name: string;\r\n  selector: string;\r\n  button?: StateButton;\r\n  states: State[];\r\n}\r\n\r\n(() => {\r\n  let index = 100000;\r\n\r\n  const themes: Theme[] = [\r\n    {\r\n      \"value\": \"theme-blue-p\",\r\n      \"name\": \"Blue\"\r\n    },\r\n    {\r\n      \"value\": \"theme-white-p\",\r\n      \"name\": \"White\"\r\n    },\r\n    {\r\n      \"value\": \"theme-sand-s\",\r\n      \"name\": \"Sand\"\r\n    },\r\n    {\r\n      \"value\": \"theme-flow-25\",\r\n      \"name\": \"Flow 25\"\r\n    },\r\n    {\r\n      \"value\": \"theme-wave-ac\",\r\n      \"name\": \"Wave\"\r\n    },\r\n    {\r\n      \"value\": \"theme-wave-50\",\r\n      \"name\": \"Wave 50\"\r\n    },\r\n    {\r\n      \"value\": \"theme-pearl-s\",\r\n      \"name\": \"Pearl\"\r\n    },\r\n    {\r\n      \"value\": \"theme-pebble-s\",\r\n      \"name\": \"Pebble\"\r\n    }\r\n  ];\r\n\r\n  const newId = () => {\r\n    return \"pl-state-id-\" + index++;\r\n  };\r\n\r\n  const createSelect = (state: State, classList: DOMTokenList) => {\r\n    if (!state.options) {\r\n      return \"\";\r\n    }\r\n\r\n    const options = state.options;\r\n    const name = newId();\r\n    const header = state.multiple\r\n      ? 'Select many...'\r\n      : options.find(o => classList.contains(o.value))?.name ?? \"---\";\r\n    const type = state.multiple ? 'checkbox' : 'radio';\r\n\r\n    let optionsHtml = '';\r\n    options.forEach((option: StateOption) => {\r\n      const selectedHtml = classList.contains(option.value) ? \"checked\" : \"\";\r\n      const id = newId();\r\n      optionsHtml += `<input name=\"${name}\" class=\"pl-state-bar__input\" type=\"${type}\" id=\"${id}\" data-name=\"${option.name}\" value=\"${option.value}\" ${selectedHtml}/>`\r\n        + `<label class=\"pl-state-bar__label\" for=\"${id}\"><span>${option.name}</span></label>`\r\n    });\r\n\r\n    const html = `<div class=\"pl-state-bar__group\">`\r\n      + `<div>${state.name}:</div>`\r\n      + `<div class=\"pl-state-bar__group-header\">${header}</div>`\r\n      + `<div class=\"pl-state-bar__checkbox-group\">${optionsHtml}</div>`\r\n      + `</div>`;\r\n\r\n    return html;\r\n  };\r\n\r\n  const deactiveStateButtons = () => {\r\n    const stateButtons = [...document.querySelectorAll(\".pl-state__button\")];\r\n    stateButtons.forEach(stateButton => stateButton.classList.remove(\"active\"));\r\n  };\r\n\r\n  const closeButtonClickHandler = (stateBar: HTMLElement) => {\r\n    stateBar.classList.remove(\"expand\");\r\n    document.body.classList.remove(\"pl-state-expand\");\r\n    deactiveStateButtons();\r\n    window.dispatchEvent(new Event('resize'));\r\n  };\r\n\r\n  const stateButtonClickHandler = (item: HTMLElement, stateButton: HTMLElement, plState: ComponentState) => {\r\n    deactiveStateButtons();\r\n\r\n    const stateBar: HTMLElement | null = document.querySelector(\".pl-state-bar\");\r\n    if (!stateBar) {\r\n      return;\r\n    }\r\n\r\n    if (stateButton.classList.contains(\"active\")) {\r\n      closeButtonClickHandler(stateBar);\r\n      return;\r\n    }\r\n\r\n    const stateBarContent = stateBar.querySelector(\".pl-state-bar__content\");\r\n    if (stateBarContent) {\r\n      let stateBarContentHtml = '';\r\n      let index = 0;\r\n      plState.states.forEach(state => {\r\n        const combinedState = state.name === \"Theme\" && !state.options ? { ...state, options: themes } : state;\r\n        stateBarContentHtml += createSelect(combinedState, item.classList);\r\n\r\n        index++;\r\n\r\n        if (index == 1) {\r\n          stateBarContentHtml += stateBarCloseButtonHtml();\r\n        }\r\n      });\r\n      stateBarContent.innerHTML = stateBarContentHtml;\r\n\r\n      const closeButton = stateBarContent.querySelector(\".pl-state-bar__close-button\");\r\n      if (closeButton) {\r\n        closeButton.addEventListener(\"click\", () => closeButtonClickHandler(stateBar));\r\n      }\r\n\r\n      const stateBarGroups = [...stateBarContent.querySelectorAll(\".pl-state-bar__group\")];\r\n      stateBarGroups.forEach(stateBarGroup => {\r\n        const stateBarGroupHeader = stateBarGroup.querySelector(\".pl-state-bar__group-header\");\r\n        const checkboxGroup = stateBarGroup.querySelector(\".pl-state-bar__checkbox-group\");\r\n        if (!stateBarGroupHeader || !checkboxGroup) {\r\n          return;\r\n        }\r\n\r\n        if (stateBarGroupHeader) {\r\n          stateBarGroupHeader.addEventListener(\"click\", () => {\r\n            checkboxGroup.classList.toggle(\"expand\");\r\n          });\r\n          document.addEventListener(\"click\", (e: MouseEvent) => {\r\n            if (!e.target) {\r\n              return;\r\n            }\r\n\r\n            const node = e.target as Node;\r\n\r\n            if (!checkboxGroup.contains(node) && !stateBarGroupHeader.contains(node)) {\r\n              checkboxGroup.classList.remove(\"expand\");\r\n            }\r\n          })\r\n        }\r\n\r\n        const checkboxes = stateBarGroup.querySelectorAll(\"input[type='checkbox']\");\r\n        [].forEach.call(checkboxes, (checkbox: HTMLInputElement) => {\r\n          checkbox.addEventListener(\"change\", () => {\r\n            if (!checkbox.value) {\r\n              return;\r\n            }\r\n\r\n            if (checkbox.checked) {\r\n              item.classList.add(checkbox.value);\r\n            } else {\r\n              item.classList.remove(checkbox.value);\r\n            }\r\n            window.dispatchEvent(new Event('resize'));\r\n          });\r\n        });\r\n\r\n        const radios = stateBarGroup.querySelectorAll(\"input[type='radio']\");\r\n        [].forEach.call(radios, (radio: HTMLInputElement) => {\r\n          radio.addEventListener(\"change\", () => {\r\n            [].forEach.call(radios, (r: HTMLInputElement) => {\r\n              if (r.value) {\r\n                item.classList.remove(r.value);\r\n              }\r\n            });\r\n            if (radio.value) {\r\n              item.classList.add(radio.value);\r\n            }\r\n            stateBarGroupHeader.textContent = radio.getAttribute(\"data-name\");\r\n            checkboxGroup.classList.remove(\"expand\");\r\n          });\r\n        });\r\n\r\n        const radioLabels = [...stateBarGroup.querySelectorAll(\"input[type='radio'] + label\")];\r\n        radioLabels.forEach(radioLabel => {\r\n          radioLabel.addEventListener(\"click\", () => {\r\n            checkboxGroup.classList.remove(\"expand\");\r\n          });\r\n        });\r\n      });\r\n\r\n      stateBar.classList.add(\"expand\");\r\n      stateButton.classList.add(\"active\");\r\n      document.body.classList.add(\"pl-state-expand\");\r\n      window.dispatchEvent(new Event('resize'));\r\n    }\r\n  };\r\n  const stateBarCloseButtonHtml = () => {\r\n    return `<div class=\"pl-state-bar__buttons\"><a class=\"pl-state-bar__close-button\"></a></div>`;\r\n  };\r\n\r\n  const appendButtons = (states: ComponentState[]) => {\r\n    const stateBarHtml = `<div class=\"pl-state-bar\"><div class=\"pl-state-bar__content\"></div>${stateBarCloseButtonHtml()}</div>`;\r\n\r\n    document.body.insertAdjacentHTML('beforeend', stateBarHtml);\r\n    const stateBar: HTMLElement | null = document.querySelector(\".pl-state-bar\");\r\n    if (!stateBar) {\r\n      return;\r\n    }\r\n\r\n    const closeButton = stateBar.querySelector(\".pl-state-bar__close-button\");\r\n    if (closeButton) {\r\n      closeButton.addEventListener(\"click\", () => closeButtonClickHandler(stateBar));\r\n    }\r\n\r\n    [].forEach.call(states, (plState: ComponentState) => {\r\n      if (!plState || !plState.selector) {\r\n        return;\r\n      }\r\n\r\n      const buttonModifier = plState.button?.styleModifier ?? '';\r\n      const buttonTitle = plState.name ? `title=\"Show state modifier for: ${plState.name}\"` : '';\r\n      const buttonZIndex = plState.button?.zIndex ? `style=\"z-index: ${plState.button.zIndex};\"` : '';\r\n\r\n      const items = document.querySelectorAll(plState.selector);\r\n      [].forEach.call(items, (item: HTMLElement) => {\r\n        const html = `<div class=\"pl-state ${buttonModifier}\" ${buttonZIndex}>`\r\n          + `<div class=\"pl-state__controls\">`\r\n          + `<button class=\"pl-state__button\" ${buttonTitle}>`\r\n          + `<img src=\"${import.meta.env.BASE_URL}pl-states.svg\" loading=\"async\">`\r\n          + `</button></div></div>`;\r\n\r\n        const stateButtonParent = plState.button?.parentSelector ? item.querySelector(plState.button.parentSelector) : item;\r\n        if (!stateButtonParent) {\r\n          return;\r\n        }\r\n        stateButtonParent.insertAdjacentHTML('beforeend', html);\r\n\r\n        const stateContainer: HTMLElement | null = stateButtonParent.querySelector(\":scope > .pl-state\");\r\n        if (!stateContainer) {\r\n          return;\r\n        }\r\n\r\n        const stateButton: HTMLElement | null = stateContainer.querySelector(\".pl-state__button\");\r\n        if (stateButton) {\r\n          stateButton.addEventListener(\"click\", () => {\r\n            stateButtonClickHandler(item, stateButton, plState);\r\n          })\r\n        }\r\n      });\r\n    });\r\n\r\n    addEventListener(\"resize\", function () {\r\n      const stateBar = document.querySelector(\".pl-state-bar\");\r\n      if (!stateBar) {\r\n        return;\r\n      }\r\n\r\n      const stateBarRect = stateBar.getBoundingClientRect();\r\n      document.documentElement.style.setProperty(\"--pl-state-bar-height\", Math.ceil(stateBarRect.height) + \"px\");\r\n    })\r\n  };\r\n\r\n  const init = () => {\r\n    const localStorageKey = \"pl-show-state-selector\";\r\n    const showStateSelector = localStorage.getItem(localStorageKey);\r\n\r\n    if (!showStateSelector) {\r\n      return;\r\n    }\r\n\r\n    fetch(import.meta.env.BASE_URL + \"pl-states.json\")\r\n      .then((response) => response.json())\r\n      .then((data) => appendButtons(data));\r\n  };\r\n\r\n  init();\r\n})();\r\n"],"names":["index","themes","newId","createSelect","state","classList","options","name","header","_a","o","type","optionsHtml","option","selectedHtml","id","deactiveStateButtons","stateButton","closeButtonClickHandler","stateBar","stateButtonClickHandler","item","plState","stateBarContent","stateBarContentHtml","combinedState","stateBarCloseButtonHtml","closeButton","stateBarGroup","stateBarGroupHeader","checkboxGroup","e","node","checkboxes","checkbox","radios","radio","r","radioLabel","appendButtons","states","stateBarHtml","buttonModifier","buttonTitle","buttonZIndex","_b","items","html","stateButtonParent","stateContainer","stateBarRect","response","data"],"mappings":"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"}